webpackJsonp([0],{"2NzC":function(a,b,c){"use strict";function d(a){return m()(a)?a:g.a.createElement("pre",null,JSON.stringify(a,null,2))}function e(a){return m()(a)?g.a.createElement("p",null,a):g.a.createElement("tbody",null,Object.keys(a).map(function(b){return g.a.createElement("tr",{key:b},g.a.createElement("td",null,b),g.a.createElement("td",null,d(a[b])))}))}var f=c("GiK3"),g=c.n(f),h=c("KSGD"),i=c.n(h),j=c("xAXi"),k=c.n(j),l=c("JDN0"),m=c.n(l),n=c("RH2O"),o=c("9sri"),p=c("j8gx"),q=function(a){var b=a.errors,c=a.dispatch;return null!==b&&b.map(function(a){return 0<=[p.a.TOKEN_EXPIRATION,p.a.BAD_TOKEN].indexOf(a.code)&&(c(Object(o.b)(a.id)),c(Object(j.push)("/user/login"))),0<=[p.a.USER_UNAUTHORIZED,p.a.PERMISSION_DENIED].indexOf(a.code)&&(c(Object(o.b)(a.id)),c(Object(j.push)("/"))),g.a.createElement("li",{key:a.id},g.a.createElement("h4",null,a.title)," "+a.detail,a.meta&&e(a.meta))}),null};q.propTypes={errors:i.a.any,dispatch:i.a.func},q.defaultProps={errors:null,dispatch:null},b.a=Object(n.connect)(function(a){return{errors:a.errors}})(q)},LcOq:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),function(a){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=c("GiK3"),h=c.n(g),i=c("2KeS"),j=c("RH2O"),k=c("F8kA"),l=c("rGbO"),m=c.n(l),n=c("xAXi"),o=c.n(n),p=c("2NzC"),q=c("bBzP"),r=c("quWh"),s=c("MfRy"),t=c("Mb4Z"),u=c("67t3"),v=c.n(u),w=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),x=function(a){function b(a){d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.loadItems=c._loadItems.bind(c),c.handleAddClick=c._handleAddClick.bind(c),c.handleRemoveClick=c._handleRemoveClick.bind(c),c.handleSaveClick=c._handleSaveClick.bind(c),console.log("another fff"),c}return f(b,a),w(b,[{key:"componentWillMount",value:function(){console.log("will mount")}},{key:"componentDidMount",value:function(){this.props.fetchVehiclesIfNeeded(this.props.match.params.page),console.log("hello")}},{key:"_handleAddClick",value:function(){var a=this,b=this.vehicletext.value;console.log(b),this.props.createVehicle(b).then(function(){a.vehicletext.value=""})}},{key:"_handleSaveClick",value:function(a,b){this.props.updateVehicle(a,b)}},{key:"_handleRemoveClick",value:function(a){this.props.removeVehicle(a)}},{key:"_loadItems",value:function(a){var b=this.props.location;this.props.setCrrentPage(a),this.props.fetchVehiclesIfNeeded(a),void 0!==b&&this.props.push({pathname:b.pathname,query:{page:this.props.page.current}})}},{key:"renderVehicleList",value:function(){var a,b=this,c=this.props.vehicleList;c.readyStatus&&"VEHICLES_INVALID"!==c.readyStatus&&"VEHICLES_REQUESTING"!==c.readyStatus?"VEHICLES_FAILURE"===c.readyStatus&&(a=h.a.createElement("p",null,"Oops, Failed to load items!")):a=h.a.createElement("div",{className:"loader"},"Loading ...");var d=[];return this.props.vehicles.map(function(a){d.push(h.a.createElement(s.a,{vehicle:a._id,onRemoveClick:b.handleRemoveClick(a._id),onSaveClick:b.handleSaveClick(a._id),name:a.text}))}),console.log(d),h.a.createElement(t.a,{page:this.props.page.current,hasMore:this.props.page.current<this.props.page.last,loadMore:this.loadItems,loader:a},h.a.createElement("div",{className:"tracks"},d))}},{key:"render",value:function(){var a=this,b=this.props.page;return console.log(b),h.a.createElement("div",{className:v.a.siteContent},h.a.createElement("div",{className:v.a.container},h.a.createElement(p.a,null),h.a.createElement("h3",{className:v.a.h6},"Vehicle List (",b.current+" / "+b.total,")"),h.a.createElement("input",{disabled:!1,type:"text",ref:function(b){a.vehicletext=b}}),h.a.createElement("button",{className:v.a.btnBlue,disabled:!1,onClick:this.handleAddClick},"Add Vehicle"),1!==b.current&&h.a.createElement("div",null,"The input box is only available for page 1"),this.renderVehicleList()))}}]),b}(g.PureComponent),y=function(a){var b=a.location,c=a.vehicleList,d=a.pagination,e=a.entity,f=d.vehicles,g=f.page,h=f.pages,i=Array.prototype.flatten(Object.keys(h).map(function(a){return h[a].ids})),j="ids"in i?i.ids.map(function(a){return e.vehicles[a]}):[];return{location:b,vehicleList:c,vehicles:j,page:g}},z=Object(j.connect)(y,function(a){return{push:function(b,c){return a(Object(n.push)(b,c))},createVehicle:function(b){return a(Object(q.a)(b))},updateVehicle:function(b,c){return a(Object(q.d)(b,c))},removeVehicle:function(b){return a(Object(q.c)(b))},fetchVehiclesIfNeeded:function(){return a(Object(q.b)())},setCrrentPage:function(b){return a(Object(r.b)("VEHICLE",b))}}});b["default"]=Object(i.compose)(Object(l.hot)(a),k.withRouter,z)(x)}.call(b,c("f1Eh")(a))},Mb4Z:function(a,b,c){"use strict";function d(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=c("GiK3"),i=c.n(h),j=c("KSGD"),k=c.n(j),l=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.scrollListener=c.scrollListener.bind(c),c}return g(b,a),l(b,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"setDefaultLoader",value:function(a){this.defaultLoader=a}},{key:"detachMousewheelListener",value:function(){var a=window;!1===this.props.useWindow&&(a=this.scrollComponent.parentNode),a.removeEventListener("mousewheel",this.mousewheelListener,this.props.useCapture)}},{key:"detachScrollListener",value:function(){var a=window;!1===this.props.useWindow&&(a=this.scrollComponent.parentNode),a.removeEventListener("scroll",this.scrollListener,this.props.useCapture),a.removeEventListener("resize",this.scrollListener,this.props.useCapture)}},{key:"attachScrollListener",value:function(){if(this.props.hasMore){var a=window;!1===this.props.useWindow&&(a=this.scrollComponent.parentNode),a.addEventListener("mousewheel",this.mousewheelListener,this.props.useCapture),a.addEventListener("scroll",this.scrollListener,this.props.useCapture),a.addEventListener("resize",this.scrollListener,this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(a){1===a.deltaY&&a.preventDefault()}},{key:"scrollListener",value:function(){var a,b=this.scrollComponent,c=window;if(this.props.useWindow){var d=document.documentElement||document.body.parentNode||document.body,e=void 0===c.pageYOffset?d.scrollTop:c.pageYOffset;a=this.props.isReverse?e:this.calculateTopPosition(b)+(b.offsetHeight-e-window.innerHeight)}else a=this.props.isReverse?b.parentNode.scrollTop:b.scrollHeight-b.parentNode.scrollTop-b.parentNode.clientHeight;a<+this.props.threshold&&(this.detachScrollListener(),"function"==typeof this.props.loadMore&&this.props.loadMore(this.pageLoaded+=1))}},{key:"calculateTopPosition",value:function(a){return a?a.offsetTop+this.calculateTopPosition(a.offsetParent):0}},{key:"render",value:function(){var a=this,b=this.props,c=b.children,e=b.element,f=b.hasMore,g=b.initialLoad,h=b.isReverse,j=b.loader,k=b.loadMore,l=b.pageStart,m=b.ref,n=b.threshold,o=b.useCapture,p=b.useWindow,q=d(b,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow"]);q.ref=function(b){a.scrollComponent=b,m&&m(b)};var r=[c];return f&&(j?h?r.unshift(j):r.push(j):this.defaultLoader&&(h?r.unshift(this.defaultLoader):r.push(this.defaultLoader))),i.a.createElement(e,q,r)}}]),b}(h.Component);m.propTypes={children:k.a.oneOfType([k.a.object,k.a.array]).isRequired,element:k.a.string,hasMore:k.a.bool,initialLoad:k.a.bool,isReverse:k.a.bool,loader:k.a.object,loadMore:k.a.func.isRequired,pageStart:k.a.number,ref:k.a.func,threshold:k.a.number,useCapture:k.a.bool,useWindow:k.a.bool},m.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null},b.a=m}});